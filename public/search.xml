<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ECS配置流程</title>
      <link href="/2022/11/03/my-first-page/"/>
      <url>/2022/11/03/my-first-page/</url>
      
        <content type="html"><![CDATA[<h2 id="windows-server-中文版-含UI界面"><a href="#windows-server-中文版-含UI界面" class="headerlink" title="windows server 中文版 含UI界面"></a>windows server 中文版 含UI界面</h2><h3 id="控制台配置"><a href="#控制台配置" class="headerlink" title="控制台配置"></a>控制台配置</h3><ol><li>创建实例</li></ol><ol start="2"><li>配置实例名，描述等</li></ol><p>（配置安全组规则）</p><ol start="3"><li>5 min后重置实例密码</li></ol><h3 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h3><ol><li><p>远程桌面连接（windows）： </p><p> win + R ： mstsc </p><p> 目标地址：47.96.99.183（服务器公网IP ）</p><p> 用户名： administrator</p><p> 密码：Clover(996)</p></li><li><p>ssh环境安装</p><p> 打开Windows Powershell（管理员）</p></li></ol><ul><li>查看是否安装OpenSSH</li></ul><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Get-WindowsCapability -Online | Where-Object Name -like &#x27;OpenSSH*&#x27;</span><br></pre></td></tr></table></figure><ul><li>安装ssh客户端</li></ul><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Add-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0</span><br></pre></td></tr></table></figure><ul><li>安装ssh服务端</li></ul><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Add-WindowsCapability -Online -Name OpenSSH.Server~~~~0.0.1.0</span><br></pre></td></tr></table></figure><ul><li>启动并配置 OpenSSH 服务器</li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Start the sshd service</span></span><br><span class="line">Start-Service sshd</span><br><span class="line"></span><br><span class="line"><span class="comment"># OPTIONAL but recommended:</span></span><br><span class="line">Set-Service -Name sshd -StartupType <span class="string">&#x27;Automatic&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Confirm the Firewall rule is configured. It should be created automatically by setup. Run the following to verify</span></span><br><span class="line"><span class="keyword">if</span> (!(Get-NetFirewallRule -Name <span class="string">&quot;OpenSSH-Server-In-TCP&quot;</span> -ErrorAction SilentlyContinue | Select-Object Name, Enabled)) &#123;</span><br><span class="line">    Write-Output <span class="string">&quot;Firewall Rule &#x27;OpenSSH-Server-In-TCP&#x27; does not exist, creating it...&quot;</span></span><br><span class="line">    New-NetFirewallRule -Name <span class="string">&#x27;OpenSSH-Server-In-TCP&#x27;</span> -DisplayName <span class="string">&#x27;OpenSSH Server (sshd)&#x27;</span> -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    Write-Output <span class="string">&quot;Firewall rule &#x27;OpenSSH-Server-In-TCP&#x27; has been created and exists.&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>此时就可以在本地windows使用 ssh 登录服务器</li></ol><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ssh administrator@47.96.99.183</span><br><span class="line">The authenticity of host <span class="string">&#x27;47.96.99.183 (47.96.99.183)&#x27;</span> can<span class="string">&#x27;t be established.</span></span><br><span class="line"><span class="string">ED25519 key fingerprint is SHA256:wW+kRmMmmB7Av0Ls7vqVU01jNM+GcOq8RVdSpdLUsdo.</span></span><br><span class="line"><span class="string">This key is not known by any other names</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span></span><br><span class="line"><span class="string">Warning: Permanently added &#x27;</span>47.96.99.183<span class="string">&#x27; (ED25519) to the list of known hosts.</span></span><br><span class="line"><span class="string">administrator@47.96.99.183&#x27;</span>s password:</span><br></pre></td></tr></table></figure><pre><code>登录成功</code></pre><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">administrator@StophemoECS C:\Users\Administrator&gt;</span><br></pre></td></tr></table></figure><ol start="4"><li><p>安装node.js</p></li><li><p>安装Git</p></li><li><p>安装Nginx</p><p> 官网下载，解压</p><p> 双击nginx.exe 启动</p><p> dos命令操作：</p></li></ol><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 启动</span></span><br><span class="line">nginx.exe </span><br><span class="line"><span class="comment"># 或者 </span></span><br><span class="line">start nginx</span><br><span class="line"><span class="comment"># 关闭Nginx</span></span><br><span class="line"><span class="comment"># 快速停止nginx</span></span><br><span class="line">nginx -s stop  </span><br><span class="line"><span class="comment"># 完整有序的停止nginx</span></span><br><span class="line">nginx -s quit</span><br><span class="line"><span class="comment"># 使用taskkill命令</span></span><br><span class="line">taskkill /f /t /im nginx.exe</span><br></pre></td></tr></table></figure><pre><code>try_files $uri $uri/ /index.html;</code></pre><h3 id="SSL"><a href="#SSL" class="headerlink" title="SSL"></a>SSL</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sh acme.sh --install-cert -d stophemo.top --key-file       C://nginx/html/key.pem  --fullchain-file C://nginx/html/cert.pem --reloadcmd </span><br></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">//</span> <span class="string">vim</span> <span class="string">/etc/nginx/nginx.conf</span></span><br><span class="line"></span><br><span class="line"><span class="string">server</span> &#123;</span><br><span class="line">        <span class="string">listen</span> <span class="number">443</span><span class="string">;</span></span><br><span class="line">        <span class="string">server_name</span>  <span class="string">www.mysite.com</span> <span class="string">mysite.com</span> <span class="string">m.mysite.com;</span>  <span class="comment"># 域名</span></span><br><span class="line">        <span class="string">ssl</span>          <span class="string">on;</span>                                      <span class="comment"># 开启ssl</span></span><br><span class="line">        <span class="string">ssl_certificate</span>  <span class="string">/etc/nginx/ssl/fullchain.cer;</span>        <span class="comment"># 证书目录</span></span><br><span class="line">        <span class="string">ssl_certificate_key</span>  <span class="string">/etc/nginx/ssl/ohlaa.key;</span>        <span class="comment"># 证书目录</span></span><br><span class="line">        <span class="string">ssl_session_timeout</span> <span class="string">5m;</span></span><br><span class="line">        <span class="string">ssl_ciphers</span> <span class="string">ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span></span><br><span class="line">        <span class="string">ssl_protocols</span> <span class="string">TLSv1</span> <span class="string">TLSv1.1</span> <span class="string">TLSv1.2;</span></span><br><span class="line">        <span class="string">ssl_prefer_server_ciphers</span> <span class="string">on;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="string">location</span> <span class="string">/</span> &#123;</span><br><span class="line">            <span class="string">root</span> <span class="string">/home/xxx;</span></span><br><span class="line">            <span class="string">index</span> <span class="string">index.html</span> <span class="string">index.htm;</span></span><br><span class="line">        <span class="string">location</span> <span class="string">/static</span> &#123;</span><br><span class="line">            <span class="string">alias</span> <span class="string">/home/xx/static;</span> <span class="comment"># 静态资源路径</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
